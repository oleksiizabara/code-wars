<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

            <!--    
                Number is a palindrome if it is equal to the number with digits in reversed order. 
                For example, 5, 44, 171, 4884 are palindromes and 43, 194, 4773 are not palindromes.

                Write a method palindrome_chain_length which takes a positive number and returns the 
                number of special steps needed to obtain a palindrome. The special step is: "reverse the 
                digits, and add to the original number". If the resulting number is not a palindrome, 
                repeat the procedure with the sum until the resulting number is a palindrome.

                If the input number is already a palindrome, the number of steps is 0.

                Input will always be a positive integer.
            -->

    <script>
       var palindromeChainLength = function(n) {

        var str = n.toString();
        if (str.length === 1) return 0;
      
        var count = 0;
        while (!isPalindrom(str)) {
          count++;
          n+= parseInt(n.toString().split("").reverse().join(""));
          str = n.toString();
        }
        return count;
      }
      
      function isPalindrom(str) {
        var ff, ss;
        if (str.length%2 === 0) {
          ff = str.length/2;
          ss = str.length/2;
        } else {
          ff = (str.length - 1)/2;
          ss = (str.length + 1)/2;
        }
        return str.substring(0, ff) === str.substring(ss).split("").reverse().join("");
      }
      
      console.log(palindromeChainLength(87));
    </script>
    
</body>
</html>